<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tur Virtual Rumah Tradisional Maros 0–10 (no loops)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <link rel="stylesheet" href="style/vtour.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
</head>

<body>
<div class="top-bar">
  <a href="index2.html" class="go-home">← Kembali ke Beranda</a>
  <h3 class="page-title">Tur Virtual Rumah Tradisional Maros (Scenes 0 → 10)</h3>
  <div class="top-bar__actions">
    <button class="minimap-btn" onclick="showMinimap()">Tampilkan Minimap</button>
    <button id="toggleDragBtn" class="minimap-btn">Nonaktifkan Drag</button>
  </div>
</div>
</body>

<!-- Modal Minimap -->
<div id="minimapModal" class="minimap-modal" onclick="hideMinimap()">
  <img src="assets/images/Mini Map.jpg" alt="Minimap Tur Virtual" class="minimap-img">
</div>

<div id="panorama"></div>
<div class="scenes">
  <!-- Static scene buttons without any loop -->
  <button onclick="viewer.loadScene('s0')">0</button>
  <button onclick="viewer.loadScene('s1')">1</button>
  <button onclick="viewer.loadScene('s2')">2</button>
  <button onclick="viewer.loadScene('s3')">3</button>
  <button onclick="viewer.loadScene('s4')">4</button>
  <button onclick="viewer.loadScene('s5')">5</button>
  <button onclick="viewer.loadScene('s6')">6</button>
  <button onclick="viewer.loadScene('s7')">7</button>
  <button onclick="viewer.loadScene('s8')">8</button>
  <button onclick="viewer.loadScene('s9')">9</button>
  <button onclick="viewer.loadScene('s10')">10</button>
  
</div>

<script>

  // function renderAlertHotspot(hotSpotDiv, args) {
  //   hotSpotDiv.classList.add('custom-hotspot');

  //   if (args) {
  //     const tooltip = document.createElement('span');
  //     tooltip.textContent = args;
  //     hotSpotDiv.appendChild(tooltip);
  //   }
  // }

  /*
    // === Generator otomatis hotspot ===
    // const LAST_SCENE_INDEX = 53;
    // const scenes = {};
    // for (let i = 0; i <= LAST_SCENE_INDEX; i += 1) {
    //   const sceneId = s${i};
    //   const entry = {
    //     title: Spot ${i},
    //     type: "equirectangular",
    //     panorama: panos/image${i}.jpg
    //   };
    //   if (i < LAST_SCENE_INDEX) {
    //     entry.hotSpots = [{
    //       pitch: 0,
    //       yaw: 0,
    //       type: "scene",
    //       sceneId: s${i + 1},
    //       text: Ke Spot ${i + 1}
    //     }];
    //   }
    //   scenes[sceneId] = entry;
    // }
    // var viewer = pannellum.viewer('panorama', {
    //   "default": {
    //     "firstScene": "s0",
    //     "autoLoad": true,
    //     "showControls": true
    //   },
    //   "scenes": scenes
    // });
  */

  // === Konfigurasi manual dengan hotspot eksplisit ===
  var viewer = pannellum.viewer('panorama', {
    "default": {
      "firstScene": "s0",
      "autoLoad": true,
      "showControls": true
    },
    "scenes": {
      "s0":  { "title": "Halaman Utama",  "type": "equirectangular", "panorama": "assets/360_images/depanrumah.jpg",  "hotSpots": [
        { "pitch": 0, "yaw": 0, "type": "scene", "sceneId": "s1",  "text": "Ke bagian bawah rumah" }, 
         
        {
            "pitch": -0.48,
            "yaw": -30.78,
            "type": "scene",
            "sceneId": "s10",
            "text": "Ke bagian kanan rumah"
        },
        {
            "pitch": -0.36,
            "yaw": 19.18,
            "type": "scene",
            "sceneId": "s2",
            "text": "Ke bagian kiri rumah"
        },
        {
            "pitch": 8.04,
            "yaw": -20.64,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
        {
            "pitch": -1.00,
            "yaw": -27.14,
            "type": "scene",
            "sceneId": "s9",
            "text": "Ke depan tangga"
        },
        {
            "pitch": 27.12,
            "yaw": 3.40,
            "type": "info",
            "text": "Timpalaja-Ada satu keunikan lain dalam struktur bola ugi di antara dinding dan atap. Terdapat bidang segitiga atau gevel (gable) yang disebut timpalaja. Dengan bagian timpalaja yang dipasang bersusun ini bisa diketahui status sosial pemilik rumah. Jika timpalaja memiliki tiga atau lima susun, maka tandanya pemilik rumah berasal dari golongan elite. Namun jika timpalaja hanya terdiri dari satu atau dua susun, berarti pemilik rumah berasal dari kalangan biasa. Meski demikian, penggunaan timpalaja untuk menunjukkan status sosial pada masa kini sudah tidak seketat pada zaman dahulu dan jumlah susunannya sudah tidak lagi harus selalu sesuai dengan status sosial. Masyarakat dari segala kalangan dapat memasang timpalaja dengan susunan yang sesuai keinginan.<br><br><em>Sumber:</em> <a href=\"https://id.wikipedia.org/wiki/Bola_Ugi#cite_note-5\" target=\"_blank\" rel=\"noopener noreferrer\">Wikipedia - Bola Ugi</a>",
            "URL": "https://id.wikipedia.org/wiki/Bola_Ugi#cite_note-5"
        },
        {
            "pitch": 5.26,
            "yaw": 2.35,
            "type": "info",
            "text": "Papan Nama"
        },
       {
            "pitch": 12.03,
            "yaw": 2.67,
            "type": "info",
            "text": "Jendela"
        },
        {
            "pitch": 11.87,
            "yaw": 2.46,
            "type": "info",
            "text": "Jendela"
        },
        {
            "pitch": 0.41,
            "yaw": 89.86,
            "type": "info",
            "text": "Sophia"
        },
        {
            "pitch": 1.86,
            "yaw": 74.73,
            "type": "info",
            "text": "Akbar"
        },
         {
            "pitch": 7.33,
            "yaw": 147.98,
            "type": "info",
            "text": "Rifan"
        },
        {
            "pitch": -64.94,
            "yaw": 6.81,
            "type": "info",
            "text": "Rumah Tradisional Pare-pare"
        },
        {
            "pitch": 18.07,
            "yaw": 52.05,
            "type": "info",
            "text": "Rumah Tradisional Bantaeng"
        },
        {
            "pitch": -1.16,
            "yaw": -35.75,
            "type": "info",
            "text": "Pagar"
        },
        {
            "pitch": 1,
            "yaw": 38,
            "type": "info",
           "text": "bunga"
        },
        {
            "pitch": 6.32,
            "yaw": -64.99,
            "type": "info",
            "text": "Rumah Tradisional Pare-pare"
        },
      ] },

      "s1":  { "title": "Bagian bawah rumah",  "type": "equirectangular", "panorama": "../assets/360_images/bawahrumah.jpg",  "hotSpots": [
        { "pitch": 3.51, "yaw": -98.46, "type": "scene", "sceneId": "s2",  "text": "Ke bagian kiri rumah" },        
      {
            "pitch": -1.92,
            "yaw": -1.92,
            "type": "scene",
            "sceneId": "s0",
            "text": "Ke halaman depan rumah"
        },
        {
            "pitch": -3.51,
            "yaw": 86.31,
            "type": "scene",
            "sceneId": "s10",
            "text": "Ke bagian kanan rumah"
        },
        {
            "pitch": -3.88,
            "yaw": 27.32,
            "type": "scene",
            "sceneId": "s9",
            "text": "Ke depan tangga"
        },
        {
            "pitch": -15.19,
            "yaw": -35.75,
            "type": "info",
            "text": "Tiang Rumah"
        },
         {
            "pitch": 6.55,
            "yaw": 84.55,
            "type": "info",
            "text": "Rumah Tradisional Pare-pare"
        },
         {
            "pitch": 13.09,
            "yaw": -86.74,
            "type": "info",
            "text": "Rumah Tradisional Bantaeng"
        },
        {
            "pitch": -11.72,
            "yaw": 81.25,
            "type": "info",
            "text": "Bale-Bale"
        },
        {
            "pitch": -4.95,
            "yaw": 94.32,
            "type": "info",
            "text": "Sophia"
        },
         ] },
      "s2":  { "title": "bagian kiri rumah",  "type": "equirectangular", "panorama": "../assets/360_images/kiri.jpg",  "hotSpots": [
        { "pitch": 5.60, "yaw": 63.34, "type": "scene", "sceneId": "s3",  "text": "Ke belakang rumah" },
        {
            "pitch": 8.92,
            "yaw": -23.31,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
        {
            "pitch": 0.70,
            "yaw": -79.56,
            "type": "scene",
            "sceneId": "s0",
            "text": "Ke halaman depan rumah"
        },
        {
            "pitch": -10.38,
            "yaw": 6.64,
            "type": "scene",
            "sceneId": "s1",
            "text": "Ke bagian bawah rumah"
        },
        {
            "pitch": -1.98,
            "yaw": -39.23,
            "type": "scene",
            "sceneId": "s9",
            "text": "Ke depan tangga"
            },
        {
            "pitch": -1.61,
            "yaw": 1.81,
            "type": "scene",
            "sceneId": "s10",
            "text": "Ke bagian kanan rumah"
        },
        {
            "pitch": -3.89,
            "yaw": -3.20,
            "type": "info",
            "text": "Bale bale"
        },
        {
            "pitch": 39.97,
            "yaw": -33.90,
            "type": "info",
            "text": "Jendela"
        },
         {
            "pitch": 44.77,
            "yaw": 5.54,
            "type": "info",
            "text": "Jendela"
        },
         {
            "pitch": 36.69,
            "yaw": 38.09,
            "type": "info",
            "text": "Jendela"
        },
         {
            "pitch": 29.48,
            "yaw": 55.38,
            "type": "info",
            "text": "Jendela"
        },
         {
            "pitch": 29.36,
            "yaw": -178.69,
            "type": "info",
            "text": "Rumah Tradisional Bantaeng"
        },
         {
            "pitch": -5.53,
            "yaw": -93.89,
            "type": "info",
            "text": "Bunga"
        },
         {
            "pitch": 7.33,
            "yaw": -14.95,
            "type": "info",
            "text": "Tiang"
        },
        {
            "pitch": -2.66,
            "yaw": 132.43,
            "type": "info",
            "text": "Rifan"
        },
      ] },
      "s3":  { "title": "belakang rumah",  "type": "equirectangular", "panorama": "../assets/360_images/belakang.jpg",  "hotSpots": [
        { "pitch": 20.28, "yaw": -15.00, "type": "scene", "sceneId": "s4",  "text": "Ke dalam rumah (bagian belakang)" },
        {
            "pitch": -3.60,
            "yaw": -140.34,
            "type": "scene",
            "sceneId": "s2",
            "text": "Ke bagian kiri rumah"
        },
        {
            "pitch": 3.32,
            "yaw": 136.10,
            "type": "info",
            "text": "Pohon Belimbing sayur"
        },
         {
            "pitch": 27.04,
            "yaw": -160.42,
            "type": "info",
            "text": "Rumah Tradisional Bantaeng"
        },
        {
            "pitch": 1,
            "yaw": 38,
            "type": "info",
            "text": "Pohon Pepaya"
        },
         {
            "pitch": -6.32,
            "yaw": -25.67,
            "type": "info",
            "text": "Tangga Belakang"
        },
         {
            "pitch": 6.58,
            "yaw": 174.42,
            "type": "info",
            "text": "Sophia"
        },
      
         ] },
      "s4":  { "title": "dalam rumah (bagian belakang)",  "type": "equirectangular", "panorama": "../assets/360_images/dapur.jpg",  "hotSpots": [
        { "pitch": -1.99, "yaw": 59.48, "type": "scene", "sceneId": "s5",  "text": "ke dalam rumah (ruang tengah)" },
         {
            "pitch": 0.37,
            "yaw": 3.46,
            "type": "scene",
            "sceneId": "s3",
            "text": "Keluar ke bagian belakang rumah"
        },
         {
            "pitch": -3.41,
            "yaw": 87.82,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
         {
            "pitch": -9.53,
            "yaw": 89.54,
            "type": "scene",
            "sceneId": "s7",
            "text": "Ke bagian dalam rumah"
        },
        {
            "pitch": -8.43,
            "yaw": -135.37,
            "type": "info",
            "text": "Pintu WC"
        },
         {
            "pitch": -61.14,
            "yaw": 54.65,
            "type": "info",
            "text": "karpet"
        },
       
        {
            "pitch": 90.00,
            "yaw": -96.30,
            "type": "info",
            "text": "Lampu"
        },
        {
            "pitch": -6.55,
            "yaw": 14.59,
            "type": "info",
            "text": "Pintu Masuk/Keluar (belakang)"
        },
      ] },
      "s5":  { "title": "dalam rumah (ruang tengah)",  "type": "equirectangular", "panorama": "../assets/360_images/dalam2.jpg",  "hotSpots": [
        { "pitch": -3.68, "yaw": -9.80, "type": "scene", "sceneId": "s6",  "text": "Ke dalam rumah (kamar)" },
        {
            "pitch": -8.13,
            "yaw": -80.36,
            "type": "scene",
            "sceneId": "s7",
            "text": "Ke bagian dalam rumah"
        },
        {
            "pitch": -8.39,
            "yaw": -122.30,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
        {
            "pitch": -4.28,
            "yaw": -37.74,
            "type": "scene",
            "sceneId": "s4",
            "text": "Ke dalam rumah (bagian belakang)"
        },
        {
            "pitch": 50.47,
            "yaw": -73.94,
            "type": "info",
            "text": "Lampu"
        },
        {
            "pitch": 4.85,
            "yaw": 30.27,
            "type": "info",
            "text": "Tiang"
        },
        {
            "pitch": -4.33,
            "yaw": -123.93,
            "type": "info",
            "text": "Pintu Masuk/Keluar (depan)"
        },
        {
            "pitch": -5.16,
            "yaw": 82.22,
            "type": "info",
            "text": "Jendela"
        },
     
      ] },
      "s6":  { "title": "kamar",  "type": "equirectangular", "panorama": "../assets/360_images/kamar.jpg",  "hotSpots": [
        { "pitch": -3.89, "yaw": -16.75, "type": "scene", "sceneId": "s7",  "text": "ke bagian dalam rumah" },
        {
            "pitch": -5.49,
            "yaw": 6.62,
            "type": "info",
            "text": "Lemari"
        },
        {
            "pitch": -2.32,
            "yaw": 50.42,
            "type": "info",
            "text": "Jendela"
        },
        {
            "pitch": 54.55,
            "yaw": 7.10,
            "type": "info",
            "text": "Lampu"
        },
        {
            "pitch": -16.12,
            "yaw": -29.66,
            "type": "info",
            "text": "Pintu Masuk/Keluar Kamar"
        },
        ] },
      "s7":  { "title": "dalam rumah",  "type": "equirectangular", "panorama": "../assets/360_images/dalam.jpg",  "hotSpots": [
        { "pitch": -30.15, "yaw": 164.96, "type": "scene", "sceneId": "s8",  "text": "Ke teras rumah" },
         {
            "pitch": -3.70,
            "yaw": -0.51,
            "type": "scene",
            "sceneId": "s4",
            "text": "Ke dalam rumah (bagian belakang)"
        },
         {
            "pitch": -1.77,
            "yaw": 32.38,
            "type": "scene",
            "sceneId": "s6",
            "text": "Ke dalam kamar"
        },
         {
            "pitch": -21.36,
            "yaw": 174.12,
            "type": "scene",
            "sceneId": "s9",
            "text": "Ke depan tangga"
        },
        {
            "pitch": -8.80,
            "yaw": 151.65,
            "type": "info",
            "text": "Pintu Masuk/Keluar (Depan)"
        },
        {
            "pitch": 3.84,
            "yaw": 116.70,
            "type": "info",
            "text": "jendela"
        },
        {
            "pitch": 4.43,
            "yaw": 49.91,
            "type": "info",
            "text": "Tiang"
        },
        {
            "pitch": 1.50,
            "yaw": -147.71,
            "type": "info",
            "text": "Sapu"
        },
        {
            "pitch": 1,
            "yaw": 38,
            "type": "info",
            "text": "Kamar"
        },
         ] },
      "s8":  { "title": "teras",  "type": "equirectangular", "panorama": "../assets/360_images/teras.jpg",  "hotSpots": [
        { "pitch": -31.16, "yaw": 171.71, "type": "scene", "sceneId": "s9",  "text": "Ke depan tangga" },
       {
            "pitch": -17.73,
            "yaw": -0.24,
            "type": "scene",
            "sceneId": "s7",
            "text": "Ke bagian dalam rumah"
        },
        {
            "pitch": -22.28,
            "yaw": -71.99,
            "type": "scene",
            "sceneId": "s10",
            "text": "Ke bagian kanan rumah"
        },
        {
            "pitch": -2.95,
            "yaw": 146.62,
            "type": "scene",
            "sceneId": "s0",
            "text": "Ke halaman depan rumah"
        },
        {
            "pitch": -47.49,
            "yaw": -3.48,
            "type": "info",
            "text": "Keset Kaki"
        },
        {
            "pitch": -26.52,
            "yaw": 147.58,
            "type": "info",
            "text": "Rifan"
        },
       
         ] },
      "s9":  { "title": "depan tangga",  "type": "equirectangular", "panorama": "../assets/360_images/tangga.jpg",  "hotSpots": [
        { "pitch": -1.16, "yaw": -35.75, "type": "scene", "sceneId": "s10",  "text": "Ke kanan rumah" },
       {
            "pitch": -0.93,
            "yaw": 61.68,
            "type": "scene",
            "sceneId": "s2",
            "text": "Ke bagian kiri rumah"
        },
        {
            "pitch": 15.91,
            "yaw": 0.71,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
        {
            "pitch": 0.19,
            "yaw": 141.73,
            "type": "scene",
            "sceneId": "s0",
            "text": "Ke halaman depan rumah"
        },
        {
            "pitch": -3.63,
            "yaw": 35.23,
            "type": "scene",
            "sceneId": "s1",
            "text": "Ke bawah rumah"
        },
        {
            "pitch": -2.54,
            "yaw": 103.73,
            "type": "info",
            "text": "Rifan"
        },
        {
            "pitch": 9.22,
            "yaw": 46.16,
            "type": "info",
            "text": "Papan nama"
        },
       
        {
            "pitch": 13.52,
            "yaw": 70.43,
            "type": "info",
            "text": "Rumah Tradisional Bantaeng"
        },
         {
            "pitch": 9.03,
            "yaw": -60.55,
            "type": "info",
            "text": "Rumah Tradisional Pare-pare"
        },
      ] },
      "s10":  { "title": "bagian kanan rumah",  "type": "equirectangular", "panorama": "..assets/360_images/kanan.jpg",  "hotSpots": [
        { "pitch": -2.03, "yaw": 51.64, "type": "scene", "sceneId": "s9",  "text": "Ke depan tangga rumah" },
        {
            "pitch": -0.20,
            "yaw": -5.30,
            "type": "scene",
            "sceneId": "s2",
            "text": "Ke bagian kiri rumah"
        },
        {
            "pitch": 2.77,
            "yaw": 55.08,
            "type": "scene",
            "sceneId": "s0",
            "text": "Ke halaman depan rumah"
        },
        {
            "pitch": 16.27,
            "yaw": 40.65,
            "type": "scene",
            "sceneId": "s8",
            "text": "Ke teras"
        },
        {
            "pitch": -8.33,
            "yaw": 11.11,
            "type": "info",
            "text": "Bale-bale"
        },
        {
            "pitch": 26.45,
            "yaw": 8.26,
            "type": "info",
            "text": "Jendela"
        },
        {
            "pitch": 2.03,
            "yaw": 21.00,
            "type": "info",
            "text": "tiang rumah"
        },
        {
            "pitch": 20.14,
            "yaw": -176.92,
            "type": "info",
            "text": "Rumah Tradisional Pare-pare"
        },
        {
            "pitch": -1.60,
            "yaw": 144.45,
            "type": "info",
            "text": "Rifan"
        },
       
      ] },
    }
  });

  // Fungsi untuk menampilkan modal minimap
  function showMinimap() {
    document.getElementById('minimapModal').classList.add('active');
  }
  function hideMinimap() {
    document.getElementById('minimapModal').classList.remove('active');
  }

  // === Menampilkan koordinat pitch dan yaw saat panorama di-klik ===
  const panoramaEl = document.getElementById('panorama');
  const coordDiv = document.createElement('div');
  coordDiv.className = 'coord-hint';
  coordDiv.textContent = 'Klik panorama untuk koordinat';
  if (panoramaEl) {
    panoramaEl.appendChild(coordDiv);
  } else {
    document.body.appendChild(coordDiv);
  }
  const toggleBtn = document.getElementById('toggleDragBtn');
  const viewerContainer = typeof viewer.getContainer === 'function'
    ? viewer.getContainer()
    : panoramicFallback();

  let dragEnabled = true;

  function panoramicFallback() {
    return panoramaEl.querySelector('.pnlm-container') || panoramaEl;
  }

  function setCoordHint(message) {
    coordDiv.textContent = message;
  }

  function showCoords(event) {
    const coords = viewer.mouseEventToCoords(event);
    if (coords && Number.isFinite(coords.yaw) && Number.isFinite(coords.pitch)) {
      coordDiv.textContent = `Yaw: ${coords.yaw.toFixed(2)}, Pitch: ${coords.pitch.toFixed(2)}`;
    } else {
      const fallbackYaw = typeof viewer.getYaw === 'function' ? viewer.getYaw() : NaN;
      const fallbackPitch = typeof viewer.getPitch === 'function' ? viewer.getPitch() : NaN;
      if (Number.isFinite(fallbackYaw) && Number.isFinite(fallbackPitch)) {
        coordDiv.textContent = `Yaw: ${fallbackYaw.toFixed(2)}, Pitch: ${fallbackPitch.toFixed(2)}`;
      } else {
        setCoordHint('Tidak dapat membaca koordinat');
      }
    }
  }

  function handlePointer(event) {
    if (!dragEnabled) {
      showCoords(event);
      event.stopPropagation();
      event.preventDefault();
    }
  }

  function handleScroll(event) {
    if (!dragEnabled) {
      event.stopPropagation();
      event.preventDefault();
    }
  }

  const wheelListenerOptions = { capture: true, passive: false };

  function disableDrag() {
    dragEnabled = false;
    panoramaEl.style.cursor = 'pointer';
    viewerContainer.style.cursor = 'pointer';
    viewerContainer.addEventListener('mousedown', handlePointer, true);
    viewerContainer.addEventListener('touchstart', handlePointer, true);
    viewerContainer.addEventListener('click', handlePointer, true);
    viewerContainer.addEventListener('touchend', handlePointer, true);
    viewerContainer.addEventListener('wheel', handleScroll, wheelListenerOptions);
    toggleBtn.textContent = 'Aktifkan Drag';
    setCoordHint('Mode koordinat aktif — klik panorama');
  }

  function enableDrag() {
    dragEnabled = true;
    panoramaEl.style.cursor = 'grab';
    viewerContainer.style.cursor = 'grab';
    viewerContainer.removeEventListener('mousedown', handlePointer, true);
    viewerContainer.removeEventListener('touchstart', handlePointer, true);
    viewerContainer.removeEventListener('click', handlePointer, true);
    viewerContainer.removeEventListener('touchend', handlePointer, true);
    viewerContainer.removeEventListener('wheel', handleScroll, wheelListenerOptions);
    toggleBtn.textContent = 'Nonaktifkan Drag';
    setCoordHint('Klik panorama untuk koordinat');
  }

  toggleBtn.onclick = function() {
    if (dragEnabled) {
      disableDrag();
    } else {
      enableDrag();
    }
  };

  // Set cursor awal dan pesan bawaan
  enableDrag();

  document.addEventListener('click', () => {
    document.querySelectorAll('.hotspot-alert.is-open').forEach((node) => node.classList.remove('is-open'));
  });
</script>

</body>
</html>